# Story 2.5: Enhanced Reporter Contact Display

## Status
**Approved**

## Story
**As a** support staff member,  
**I want** to see comprehensive reporter contact information prominently displayed on the issue detail screen,  
**so that** I can quickly identify the reporter and access all their contact details for follow-up communication.

## Acceptance Criteria
1. Reporter information is displayed prominently in a dedicated contact card section on the issue detail screen
2. All available contact fields are shown including name, phone number, email, country, and description when available
3. Contact information is visually distinct and easy to locate within the issue detail layout
4. Missing contact fields are handled gracefully without displaying empty or null values
5. Reporter contact section includes visual indicators for preferred contact methods
6. The contact display is responsive and maintains readability on different screen sizes

## Tasks / Subtasks
- [x] **Enhance Reporter Contact Display Component** (AC: 1, 3, 6)
  - [x] Create `ReporterContactCard.razor` component for dedicated contact display
  - [x] Design visually distinct card layout with appropriate styling
  - [x] Implement responsive design that works on desktop and mobile
  - [x] Position contact card prominently within the issue detail page layout
- [x] **Implement Comprehensive Contact Information Display** (AC: 2, 4)
  - [x] Display all available ContactDto fields (Name, PhoneNumber, Email, Country, Description)
  - [x] Add conditional rendering to hide empty or null contact fields
  - [x] Format phone numbers and email addresses appropriately
  - [x] Add fallback text for missing essential information
- [x] **Add Contact Method Indicators** (AC: 5)
  - [x] Add visual icons for different contact methods (phone, email, location)
  - [x] Implement visual emphasis for primary contact method (WhatsApp phone number)
  - [x] Add status indicators for contact availability or preferences
- [x] **Update Issue Detail Page Integration** (AC: 1, 3)
  - [x] Integrate ReporterContactCard component into issue detail page
  - [x] Position contact card in optimal location for visibility
  - [x] Ensure consistent styling with existing page elements
  - [x] Test integration with existing page layout and components

## Dev Agent Record

### Agent Model Used
Claude 3.5 Sonnet

### Debug Log References
No debug log issues encountered during implementation.

### Completion Notes
1. **Component Creation**: Successfully created `ReporterContactCard.razor` component with comprehensive contact display features
2. **Visual Design**: Implemented Material Design-compliant card layout with proper icons and visual hierarchy
3. **Responsive Layout**: Used MudBlazor grid system for mobile-responsive design (xs="12" md="6")
4. **Contact Field Display**: Added conditional rendering for all ContactDto fields with appropriate fallbacks
5. **Visual Indicators**: Implemented WhatsApp as primary contact method with success color and "Primary" chip indicator
6. **Integration**: Successfully integrated component into issue detail page, replacing basic text display
7. **Error Handling**: Added proper null-safe rendering and fallback messages for missing contact information
8. **Icon Usage**: Implemented Material Design icons for each contact method (Person, WhatsApp, Email, LocationOn, Notes)
9. **Accessibility**: Used proper ARIA structure through MudBlazor components with semantic markup

### File List
- `src/Server.UI/Components/Issues/ReporterContactCard.razor` (Created)
- `src/Server.UI/Pages/Issues/Details.razor` (Modified)
- `tests/Server.UI.Tests/Components/Issues/ReporterContactCardTests.cs` (Created)

### Change Log
| Date | Change | Details |
|------|---------|---------|
| 2025-09-09 | Component Creation | Created ReporterContactCard.razor with comprehensive contact display |
| 2025-09-09 | Page Integration | Integrated component into Details.razor, replacing basic reporter display |
| 2025-09-09 | Test Creation | Added comprehensive bUnit tests for component functionality |

### Status
**Ready for Review**

## Dev Notes

### Previous Story Insights
From Story 2.2 implementation:
- Issue detail page fully operational with comprehensive data loading [Source: docs/stories/2.2.story.md]
- `IssueDetailDto` includes `ReporterContact` property of type `ContactDto` [Source: src/Application/Features/Issues/DTOs/IssueDetailDto.cs]
- Current display shows basic format: `@($"{_issue.ReporterContact.Name} ({_issue.ReporterContact.PhoneNumber})")` [Source: src/Server.UI/Pages/Issues/Details.razor#L81-85]
- MudBlazor component library is established for consistent UI [Source: docs/stories/2.2.story.md]
- Responsive design patterns are implemented throughout the application [Source: docs/stories/2.2.story.md]

### Data Models

**ContactDto Available Fields**:
- **Name**: string - Contact display name [Source: src/Application/Features/Contacts/DTOs/ContactDto.cs]
- **PhoneNumber**: string? - WhatsApp phone number (E.164 format) [Source: src/Application/Features/Contacts/DTOs/ContactDto.cs]
- **Email**: string? - Email address for notifications [Source: src/Application/Features/Contacts/DTOs/ContactDto.cs]
- **Country**: string? - Contact location information [Source: src/Application/Features/Contacts/DTOs/ContactDto.cs]
- **Description**: string? - Additional contact notes [Source: src/Application/Features/Contacts/DTOs/ContactDto.cs]

**Current Implementation**:
- Only Name and PhoneNumber are displayed [Source: src/Server.UI/Pages/Issues/Details.razor#L81-85]
- Basic text format without visual enhancement [Source: src/Server.UI/Pages/Issues/Details.razor#L81-85]
- Located in simple MudStack layout [Source: src/Server.UI/Pages/Issues/Details.razor#L71-90]

### Component Specifications

**ReporterContactCard Component Design**:
```razor
@using CleanArchitecture.Blazor.Application.Features.Contacts.DTOs
@using MudBlazor

<MudCard Class="mb-4">
    <MudCardHeader>
        <CardHeaderContent>
            <div class="d-flex align-center">
                <MudIcon Icon="Icons.Material.Filled.Person" Class="mr-2" />
                <MudText Typo="Typo.h6">Reporter Information</MudText>
            </div>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent>
        <!-- Contact details with icons and formatting -->
    </MudCardContent>
</MudCard>
```
[Source: docs/architecture/frontend-architecture.md#component-template]

**MudBlazor Integration Components**:
- Use `MudCard` for distinct contact information container [Source: docs/architecture/tech-stack.md#ui-component-library]
- Use `MudIcon` with Material Design icons for contact methods [Source: docs/architecture/tech-stack.md#ui-component-library]
- Use `MudText` with appropriate typography hierarchy [Source: docs/architecture/tech-stack.md#ui-component-library]
- Use `MudChip` for status indicators and contact preferences [Source: docs/architecture/tech-stack.md#ui-component-library]
- Use responsive `MudGrid` system for mobile-friendly layout [Source: docs/architecture/tech-stack.md#ui-component-library]

### File Locations

**Files to Create**:
- `src/Server.UI/Components/Issues/ReporterContactCard.razor` - Dedicated contact display component [Source: docs/architecture/unified-project-structure.md#components]
- `src/Server.UI/Components/Issues/ReporterContactCard.razor.cs` - Component code-behind for logic [Source: docs/architecture/unified-project-structure.md#components]

**Files to Modify**:
- `src/Server.UI/Pages/Issues/Details.razor` - Replace basic contact display with new component [Source: src/Server.UI/Pages/Issues/Details.razor]

### Technical Constraints

**Component Development Standards**:
- Follow existing component patterns in `src/Server.UI/Components/Issues/` [Source: docs/architecture/coding-standards.md]
- Use parameter binding for ContactDto input [Source: docs/architecture/frontend-architecture.md]
- Implement null-safe rendering for optional contact fields [Source: docs/architecture/coding-standards.md]
- Follow responsive design patterns using MudBlazor grid system [Source: docs/architecture/frontend-architecture.md]

**UI Design Consistency**:
- Maintain existing page theme and color scheme [Source: docs/architecture/frontend-architecture.md]
- Use established typography and spacing standards [Source: docs/architecture/frontend-architecture.md]
- Follow Material Design principles via MudBlazor components [Source: docs/architecture/tech-stack.md#ui-component-library]
- Ensure accessibility compliance with proper ARIA labels [Source: docs/architecture/frontend-architecture.md]

**Performance Considerations**:
- Component should be lightweight with minimal re-rendering [Source: docs/architecture/coding-standards.md]
- Use efficient conditional rendering for optional fields [Source: docs/architecture/coding-standards.md]
- Optimize for mobile performance with responsive design [Source: docs/architecture/frontend-architecture.md]

### Architecture Alignment

**Clean Architecture Compliance**:
- Component operates purely in UI layer without business logic [Source: docs/architecture/frontend-architecture.md]
- Uses DTOs for data display without direct entity references [Source: docs/architecture/frontend-architecture.md]
- Maintains separation of concerns with focused contact display responsibility [Source: docs/architecture/frontend-architecture.md]

**MudBlazor Integration**:
- Leverages Material Design for consistent user experience [Source: docs/architecture/tech-stack.md#ui-component-library]
- Uses established component patterns and theming [Source: docs/architecture/tech-stack.md#ui-component-library]
- Implements responsive design principles [Source: docs/architecture/tech-stack.md#ui-component-library]

## Testing

### Test File Locations

**Blazor Component Tests**:
- `tests/Server.UI.Tests/Components/Issues/ReporterContactCardTests.cs` - Contact card component tests [Source: docs/architecture/testing-strategy.md#test-organization]
- `tests/Server.UI.Tests/Pages/Issues/DetailsTests.cs` - Update existing tests for new component integration [Source: docs/architecture/testing-strategy.md#test-organization]

### Testing Standards

**Frontend Testing Framework**:
- Use bUnit for Blazor component testing [Source: docs/architecture/tech-stack.md#frontend-testing]
- Test component rendering with various ContactDto configurations [Source: docs/architecture/testing-strategy.md#test-organization]
- Test responsive behavior and null value handling [Source: docs/architecture/testing-strategy.md#test-organization]
- Test component parameter binding and event handling [Source: docs/architecture/testing-strategy.md#test-organization]

**Testing Requirements**:
- Test component rendering with complete contact information
- Test graceful handling of missing/null contact fields
- Test responsive design behavior at different screen sizes
- Test visual indicators and icon display
- Test integration with parent issue detail page
- Test accessibility compliance with screen readers
- Test component performance with various ContactDto sizes

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-09 | 1.0 | Initial story creation for enhanced reporter contact display | Bob (Scrum Master) |
