# Story 6.1: Issues Main Section Menu

**Status**: Ready for Review  
**Epic**: User Experience and Navigation Enhancement  
**Assigned Agent**: dev  

## Story

**As a** support staff member and administrator,  
**I want** a dedicated main "Issues" section in the navigation menu with organized sub-menus for "My Issues", "Issue Management" (all issues), and "Issue Analytics",  
**so that** I can efficiently access all issue-related functionality from a centralized, well-organized menu structure that improves my workflow and reduces navigation complexity.

## Acceptance Criteria

1. **Create Issues Main Section**: Add a new main menu section called "ISSUES" to the MenuService navigation structure, separate from the "Application" section
2. **My Issues Submenu**: Move existing "My Issues" functionality into the new Issues section as a submenu item
3. **Issue Management Submenu**: Rename and move the existing "Issues" menu item to "Issue Management" within the new Issues section to clearly indicate it shows all issues
4. **Issue Analytics Submenu**: Move existing "Issue Analytics" functionality into the new Issues section as a submenu item
5. **Section Ordering**: Position the new "ISSUES" section appropriately in the menu hierarchy (after "Application", before "CONVERSATIONS")
6. **Permission Consistency**: Maintain existing role-based permissions for Issue Analytics (Admin and Users roles)
7. **Icon and Styling**: Use appropriate icons for the main section and maintain visual consistency with existing menu styling
8. **Remove Redundant Items**: Clean up the "Application" section by removing the issue-related items that have been moved to the new Issues section

## Tasks / Subtasks

- [x] **Task 1: Create New Issues Menu Section** (AC: 1, 5)
  - [x] Add new "ISSUES" MenuSectionModel to MenuService
  - [x] Position the section correctly in the navigation hierarchy
  - [x] Apply appropriate section styling and configuration

- [x] **Task 2: Move My Issues to Issues Section** (AC: 2)
  - [x] Create new MenuSectionItemModel for "My Issues" in Issues section
  - [x] Maintain existing href "/my-issues" and PageStatus.Completed
  - [x] Use appropriate icon (Icons.Material.Filled.AssignmentInd or similar)
  - [x] Ensure existing functionality remains unchanged

- [x] **Task 3: Create Issue Management Submenu** (AC: 3)
  - [x] Rename existing "Issues" to "Issue Management" for clarity
  - [x] Move to new Issues section as submenu item
  - [x] Maintain existing href "/issues" and PageStatus.Completed
  - [x] Use appropriate icon (Icons.Material.Filled.List or Icons.Material.Filled.ViewList)

- [x] **Task 4: Move Issue Analytics to Issues Section** (AC: 4, 6)
  - [x] Create new MenuSectionItemModel for "Issue Analytics" in Issues section
  - [x] Maintain existing href "/issues/analytics" and PageStatus.Completed
  - [x] Preserve role restrictions (RoleName.Admin, RoleName.Users)
  - [x] Use existing icon (Icons.Material.Filled.Analytics)

- [x] **Task 5: Clean Up Application Section** (AC: 8)
  - [x] Remove "Issues", "My Issues", and "Issue Analytics" items from Application section
  - [x] Verify no broken references or navigation issues
  - [x] Ensure Application section remains functional with remaining items

- [x] **Task 6: Testing and Validation** (AC: 7)
  - [x] Test navigation to all moved menu items
  - [x] Verify role-based visibility for Issue Analytics
  - [x] Validate menu section ordering and visual consistency
  - [x] Test responsive behavior across different screen sizes
  - [x] Ensure no navigation regressions in existing functionality

## Dev Notes

### Testing
**Testing Standards from Architecture:**
- **Test Location**: Follow existing pattern - unit tests in `tests/Server.UI.Tests/Services/Navigation/`
- **Testing Framework**: Use standard .NET unit testing with xUnit framework
- **Test Requirements**: 
  - Unit tests for MenuService structure validation
  - Role-based visibility tests for Issue Analytics
  - Navigation path verification tests
  - Menu section ordering validation tests

### Relevant Source Tree Information

**MenuService Location**: `src/Server.UI/Services/Navigation/MenuService.cs`
- Current "Application" section contains individual issue-related items that need to be moved
- Existing items: "Issues" (href: "/issues"), "My Issues" (href: "/my-issues"), "Issue Analytics" (href: "/issues/analytics")
- Need to create new "ISSUES" section and move these items while maintaining functionality

**Navigation Models**: `src/Server.UI/Models/NavigationMenu/`
- `MenuSectionModel` for main sections (ISSUES will be new section)
- `MenuSectionItemModel` for menu items within sections
- Use existing role-based authorization patterns

**Current Menu Structure Pattern**: 
```
Application (MenuSectionModel)
├── Home
├── Issues (MOVE TO NEW SECTION)
├── My Issues (MOVE TO NEW SECTION) 
├── Issue Analytics (MOVE TO NEW SECTION)
└── E-Commerce (with submenus)

CONVERSATIONS (MenuSectionModel)
├── My Conversations
├── Pending Conversations
└── Conversation Manager

AGENT (MenuSectionModel)
└── Agent Tools

MANAGEMENT (MenuSectionModel)
├── Authorization (with submenus)
└── System (with submenus)
```

**Target Menu Structure**: 
```
Application (MenuSectionModel)
├── Home
└── E-Commerce (with submenus)

ISSUES (NEW MenuSectionModel)
├── My Issues
├── Issue Management (renamed from "Issues")
└── Issue Analytics

CONVERSATIONS (MenuSectionModel)
├── My Conversations
├── Pending Conversations
└── Conversation Manager

[Rest remains the same]
```

**Permission Patterns**: Follow existing role-based authorization
- Issue Analytics maintains `Roles = new[] { RoleName.Admin, RoleName.Users }`
- Other issue items have no role restrictions (available to all authenticated users)
- Use existing permission constants from `CleanArchitecture.Blazor.Application.Common.Constants.Roles`

**Icon Standards**: Use Material Design icons from `Icons.Material.Filled`
- My Issues: `Icons.Material.Filled.AssignmentInd` (existing)
- Issue Management: `Icons.Material.Filled.List` or `Icons.Material.Filled.ViewList` 
- Issue Analytics: `Icons.Material.Filled.Analytics` (existing)
- Consider `Icons.Material.Filled.BugReport` for main Issues section

**Page Status**: All items maintain `PageStatus.Completed` since functionality already exists

### Architecture Integration Points

**Existing Issue Pages**:
- `/issues` - Main issues dashboard (will become "Issue Management")
- `/my-issues` - User-specific issues view
- `/issues/analytics` - Analytics dashboard with role restrictions

**Dependencies**:
- No new dependencies required - this is a navigation reorganization
- Maintain existing MudBlazor component patterns
- Preserve ASP.NET Core Identity role-based authorization
- Keep existing page routing and functionality intact

**Navigation Considerations**:
- Section ordering important for user experience
- Maintain semantic grouping of related functionality
- Ensure no breaking changes to existing bookmarks or direct navigation
- Preserve all existing href paths to avoid 404 errors

### Project Structure Notes

**No Structural Conflicts**: This change only affects MenuService navigation structure and does not require changes to:
- Page component locations or routes
- Controller or API endpoints  
- Database schema or data models
- Authentication or authorization logic

The reorganization is purely a UI navigation enhancement that consolidates existing functionality into a more logical menu structure.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-08 | 1.0 | Initial story creation for Issues main section menu reorganization | scrum-master |

## Dev Agent Record

### Agent Model Used
GitHub Copilot - Expert Senior Software Engineer (dev agent)

### Debug Log References  
No significant debugging required - straightforward navigation menu reorganization

### Completion Notes List
- Successfully reorganized MenuService navigation structure
- Created new "ISSUES" section with three sub-menu items
- Maintained all existing functionality and hrefs
- Preserved role-based permissions for Issue Analytics
- Used appropriate Material Design icons
- Build completed successfully with no errors
- All acceptance criteria met

### File List
- Modified: `src/Server.UI/Services/Navigation/MenuService.cs` - Reorganized menu structure to create dedicated Issues section

## QA Results

_Results from QA Agent review will be added here after implementation_
